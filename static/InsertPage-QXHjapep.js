import{_ as D,aV as G,B as L,C as k,G as M,o as n,g as i,d as c,b as d,w as p,u as a,aY as P,a9 as f,aX as b,a3 as u,ad as q,a2 as z,b1 as A,a$ as F,s as K,c as y,a as g,b4 as X,b5 as V,b7 as Y,p as H,f as J,v as Q,b0 as W,a4 as Z}from"./index-nrIvu4tl.js";/* empty css                          */import{u as ee}from"./dataobj-gzktrDxi.js";/* empty css                   */const I=m=>(H("data-v-cb0a73f6"),m=m(),J(),m),te={class:"insert-page"},se=I(()=>c("div",{class:"title"},[c("h1",null,"数据插入")],-1)),ae={class:"insert-form"},le={class:"select-table-item"},oe=I(()=>c("div",{class:"text"}," INSERT INTO TABLE ",-1)),ne={class:"select-column-item"},ce={class:"disp-container"},re={class:"change-input-item"},ue={class:"submit-data-item"},ie={__name:"InsertPage",setup(m){const h=ee();let{tableNames:x}=G(h);const{getTableColumns:C}=h;function E(s){for(let t=0;t<s.length;t++)this[s[t]]=""}let l=L([]),o=k({name:"",columns:[]}),r=k([]);function S(){l.value.length===0?u({type:"error",message:"请选择插入列！"}):r.push({record:new E(o.columns),key:q(8)})}function B(){if(r.length===1)u({type:"error",message:"至少保留一组值！"});else{let s=s.pop()}}M(()=>o.name,s=>{o.columns=C(s)});function T(){o.name===""?u({type:"error",message:"表名不能为空"}):(console.log(r.map(s=>s.record)),z.post("manipulate/insert",{tableName:o.name,columns:l.value,values:r.map(s=>s.record)},{headers:{"Content-Type":"application/json"}}).then(({data:{isInserted:s,message:t}})=>{s?u({type:"success",message:t}):u({type:"error",message:t})}).catch(({message:s})=>{u({type:"error",message:s})}))}function w(){l.value.length===0&&r.length===0?u({type:"info",message:"数据已清空！请勿重复操作!"}):(o.name="",l.value=[],r.splice(0,r.length),u({type:"success",message:"数据清除完毕！"}))}return(s,t)=>{const N=W,O=A,R=Z,U=F,$=Q,_=K;return n(),i("div",te,[se,c("div",ae,[c("section",le,[oe,d(O,{modelValue:a(o).name,"onUpdate:modelValue":t[0]||(t[0]=e=>a(o).name=e),class:"select-table"},{default:p(()=>[(n(!0),i(f,null,b(a(x),e=>(n(),y(N,{key:e,value:e,label:e},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),c("section",ne,[c("div",ce,[d(U,{modelValue:a(l),"onUpdate:modelValue":t[1]||(t[1]=e=>P(l)?l.value=e:l=e),class:"display-columns-list"},{default:p(()=>[(n(!0),i(f,null,b(a(o).columns,e=>(n(),y(R,{value:e,label:e,border:"",size:"large",key:e,class:"column"},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])])]),(n(!0),i(f,null,b(a(r),(e,de)=>(n(),i("section",{class:"input-value-item",key:e.key},[(n(!0),i(f,null,b(a(l),v=>(n(),y($,{key:v,modelValue:e.record[v],"onUpdate:modelValue":j=>e.record[v]=j,modelModifiers:{number:!0},class:"input-value"},null,8,["modelValue","onUpdate:modelValue"]))),128))]))),128)),c("section",re,[d(_,{type:"success",onClick:t[2]||(t[2]=e=>S()),class:"add-btn",icon:a(X)},{default:p(()=>[g("添加输入")]),_:1},8,["icon"]),d(_,{type:"danger",onClick:t[3]||(t[3]=e=>B()),class:"delete-btn",icon:a(V)},{default:p(()=>[g("删除输入")]),_:1},8,["icon"])]),c("section",ue,[d(_,{type:"primary",onClick:t[4]||(t[4]=e=>T()),class:"submit-btn",icon:a(Y)},{default:p(()=>[g("提交数据")]),_:1},8,["icon"]),d(_,{type:"danger",onClick:t[5]||(t[5]=e=>w()),class:"clear-btn",icon:a(V)},{default:p(()=>[g("清空数据")]),_:1},8,["icon"])])])])}}},be=D(ie,[["__scopeId","data-v-cb0a73f6"]]);export{be as default};
